if("undefined"==typeof jQuery)throw new Error("SA Calendar JavaScript requires jQuery");!function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("SA Calendar JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(t){"use strict";t.fn.saEmulateTransitionEnd=function(e){var a=!1,i=this;t(this).one("saTransitionEnd",function(){a=!0});return setTimeout(function(){a||t(i).trigger(t.support.satransition.end)},e),this},t(function(){t.support.satransition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var a in e)if(void 0!==t.style[a])return{end:e[a]};return!1}(),t.support.satransition&&(t.event.special.saTransitionEnd={bindType:t.support.satransition.end,delegateType:t.support.satransition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})});var e=function(e,a){this.options=a,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".sa-modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".sa-modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.sa.modal")},this))};e.VERSION="3.3.7",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(a){var i=this,n=t.Event("show.sa.modal",{relatedTarget:a});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("sa-modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.sa.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.sa.modal",function(){i.$element.one("mouseup.dismiss.sa.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var n=t.support.satransition&&i.$element.hasClass("sa-fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),n&&i.$element[0].offsetWidth,i.$element.addClass("sa-in"),i.enforceFocus();var s=t.Event("shown.sa.modal",{relatedTarget:a});n?i.$dialog.one("saTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).saEmulateTransitionEnd(e.TRANSITION_DURATION):i.$element.trigger("focus").trigger(s)}))},e.prototype.hide=function(a){a&&a.preventDefault(),a=t.Event("hide.sa.modal"),this.$element.trigger(a),this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.sa.modal"),this.$element.removeClass("sa-in").off("click.dismiss.sa.modal").off("mouseup.dismiss.sa.modal"),this.$dialog.off("mousedown.dismiss.sa.modal"),t.support.satransition&&this.$element.hasClass("sa-fade")?this.$element.one("saTransitionEnd",t.proxy(this.hideModal,this)).saEmulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.sa.modal").on("focusin.sa.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.sa.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.sa.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.sa.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.sa.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("sa-modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.sa.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(a){var i=this,n=this.$element.hasClass("sa-fade")?"sa-fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.satransition&&n;if(this.$backdrop=t(document.createElement("div")).addClass("sa-modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.sa.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("sa-in"),!a)return;s?this.$backdrop.one("saTransitionEnd",a).saEmulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):a()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("sa-in");var o=function(){i.removeBackdrop(),a&&a()};t.support.satransition&&this.$element.hasClass("sa-fade")?this.$backdrop.one("saTransitionEnd",o).saEmulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):o()}else a&&a()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="sa-modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var a=t.fn.samodal;t.fn.samodal=function(a,i){return this.each(function(){var n=t(this),s=n.data("sa.modal"),o=t.extend({},e.DEFAULTS,n.data(),"object"==typeof a&&a);s||n.data("sa.modal",s=new e(this,o)),"string"==typeof a?s[a](i):o.show&&s.show(i)})},t.fn.samodal.Constructor=e,t.fn.samodal.noConflict=function(){return t.fn.samodal=a,this}}(jQuery),window.SESHED=window.SESHED||{},function(t,e,a,i,n){"use strict";var s,o,r,d,l,h,c,u,f,p,m,v,g,y,w,x,D,b,k,S,$=0;n.init=function(){var T="ontouchstart"in t||a.maxTouchPoints;c=t.ses_sec,S=t.ses_l10n,h=t.ses_ajax_url,u=t.ses_months,(d=i(e.createElement("div"))).addClass("se-blur"),l=i(e.getElementById("se-modal")),v=l.find(".se-picker-hours"),g=l.find(".se-picker-minutes"),y=l.find(".se-picker-meridiem"),w=l.find(".se-picker-days"),x=l.find(".se-picker-years"),D=l.find(".se-picker-months"),b=l.find(".se-modal-title"),k=l.find("#se-captcha"),f=0!=y.length?13:24,p=2==v.text().length,m=2==w.text().length,s={},o={},r={},i(".se-div").each(function(){var t=i(this),e=t.data("uid"),a=n.getDate(t.data("date")),d=new Date(a.getTime()),l=n.getDateStr(a);s.hasOwnProperty(e)||(s[e]={}),o.hasOwnProperty(l)||(o[l]=t.find("th:first span:first").html()),t.find(".se-ev tr:last td").each(function(){s[e].hasOwnProperty(l)||(s[e][l]=i(this).html()),a.setDate(a.getDate()+1),l=n.getDateStr(a)}),t.find(".se-ev-dayh").each(function(){l=n.getDateStr(d),r.hasOwnProperty(l)||(r[l]=i(this).html()),d.setDate(d.getDate()+1)})}).on("click",'[name="se-ev-leftar"], [name="se-ev-rightar"]',n.datesChange).on("click",'button[name="se-event-add"], button[name="se-ev-item-edit"]',n.addEvent).on("click",'button[name="se-ev-item-showus"]',n.showUsers).on("click",'button[name="se-ev-item-delete"]',n.delEvent).on("click",'button[name="se-ev-item-visit"]',n.visitEvent),i('[name="se-timezone-save"]').on("click",n.saveTimezone),l.on("click",'button[name="se-modal-add"]',n.saveEvent).on(T?"touchstart":"mousedown",".se-picker-up, .se-picker-down",n.UpDown).on(T?"touchend":"mouseup",".se-picker-up, .se-picker-down",function(){clearInterval($),$=0}).on("show.sa.modal",n.modalShow).on("shown.sa.modal",n.modalShown)},n.UpDown=function(){if(0==$){var t=this.className.indexOf("up")>-1?1:-1,e=t>0?this.nextSibling:this.previousSibling;n.SetDateTimeVal(t,e),$=setInterval(function(){clearInterval($),$=setInterval(function(){n.SetDateTimeVal(t,e)},200)},600)}},n.SetDateTimeVal=function(t,e){if(e.className.indexOf("hours")>-1)0==(a=(parseInt(v.text())+t)%f)&&13==f?a=t>0?1:f-1:a<0&&t<0&&(a=f-1),v.text(p?n.pad(a,2):a);else if(e.className.indexOf("minutes")>-1){(a=(parseInt(g.text())+t)%60)<0&&t<0&&(a=59),g.text(n.pad(a,2))}else if(e.className.indexOf("meridiem")>-1)"AM"==y.text()?y.text("PM"):y.text("AM");else if(e.className.indexOf("years")>-1){var a=parseInt(x.text())+t,i=D.data("indx");i!=(s=new Date(a,i,w.text())).getMonth()&&w.text(m?"01":"1"),x.text(a)}else if(e.className.indexOf("days")>-1){a=parseInt(w.text())+t;var s=new Date(x.text(),D.data("indx")+1,0);a<=0?a=s.getDate():a>s.getDate()&&(a=1),w.text(m?n.pad(a,2):a)}else if(e.className.indexOf("months")>-1){if(u.length>0)(a=parseInt(D.data("indx"))+t)<0?a=u.length-1:a>=u.length&&(a=0),a!=(s=new Date(x.text(),a,w.text())).getMonth()&&w.text(m?"01":"1"),D.data("indx",a),D.text(u[a])}},n.datesChange=function(){var t=i(this),e="se-ev-leftar"==t.attr("name")?-1:1,a=t.closest(".se-div"),d=a.data("uid"),l=n.getDate(a.data("date")),h=t.closest("th").attr("colspan");l.setDate(l.getDate()+e*h);for(var c=[],u="",f=new Date(l.getTime()),p=0;p<h;p++)u=n.getDateStr(f),s[d].hasOwnProperty(u)||c.push(u),f.setDate(f.getDate()+1);var m=n.getDateStr(l),v=c.length>0?2:0;o.hasOwnProperty(m)||(v|=4),v>0?n.ajax({action:"get_sesdata",dts:c.length>0?c.join(","):"",uid:d,dt:m,dc:h,tp:v},function(t,e,i){if("ok"==t.status){if(t.hasOwnProperty("wn")&&(o[m]=t.wn),n.processCal(d,t),t.hasOwnProperty("dn"))for(u in t.dn)t.dn.hasOwnProperty(u)&&(r[u]=t.dn[u]);n.loadNewCal(a,d,l,m)}},a):n.loadNewCal(a,d,l,m)},n.loadNewCal=function(t,e,a,d){t.data("date",d);var l=!1,h="";for(h in s[e])if(s[e].hasOwnProperty(h)&&h<d){l=!0;break}l?t.find('[name="se-ev-leftar"]').css("display",""):t.find('[name="se-ev-leftar"]').css("display","none"),t.find("th:first span:first").html(o[d]);var c=new Date(a.getTime());t.find(".se-ev tr:last td").each(function(){h=n.getDateStr(a),i(this).html(s[e][h]),a.setDate(a.getDate()+1)}),t.find(".se-ev-dayh").each(function(){h=n.getDateStr(c),i(this).html(r[h]),c.setDate(c.getDate()+1)})},n.updateAllCals=function(t,e){i('.se-div[data-uid="'+t+'"]').each(function(a,o){var r=i(o),d=n.getDate(r.data("date"));r.find(".se-ev tr:last td").each(function(){var a=n.getDateStr(d);-1!=e.indexOf(a)&&i(this).html(s[t][a]),d.setDate(d.getDate()+1)})})},n.addEvent=function(){var t=i(this),a="se-event-add"==t.attr("name"),s=t.closest(".se-div"),o=s.data("uid"),r=n.getDate(s.data("date"));r.setDate(r.getDate()+t.closest("td").index()),w.text(m?n.pad(r.getDate(),2):r.getDate()),u.length>0?(D.data("indx",r.getMonth()),D.text(u[r.getMonth()])):(D.data("indx",-1),D.text("")),x.text(r.getFullYear());var d="",h=(p?"0":"")+(13==f?"1":"0"),c="00",k="AM";if(!a){var S=t.closest(".se-ev-item, .se-ev-item-my");d=S.data("id");var $=S.find(".se-ev-item-start").data("raw").split(":");if(2==$.length){var T=parseInt($[0]);13==f&&(k=T>11?"PM":"AM",0==T?T=12:T>12&&(T-=12)),h=p?n.pad(T,2):T,c=$[1]}var E=S.find(".se-ev-item-name").text(),O=S.find(".se-ev-item-dur").text();i(e.getElementById("se-name")).val(E),i(e.getElementById("se-duration")).val(O)}v.text(h),g.text(c),y.text(k),b.text(a?l.data("txtadd"):l.data("txtedit")),l.data("eid",d),l.data("uid",o),l.semodal("toggle")},n.saveEvent=function(t){var e=l.find('input[id^="se-"],textarea[id^="se-"]'),a=k.data("prefix"),s=new Date(x.text(),D.data("indx"),w.text()),o=n.getDateStr(s),d=parseInt(v.text());13==f&&("AM"==y.text()?12==d&&(d=0):12!=d&&(d+=12));var h=n.pad(d,2)+":"+g.text(),u=l.data("uid"),p=l.data("eid"),m=!0,b={action:"save_event",sec:c,dt:o,tm:h,uid:u,eid:p,prefix:a};e.each(function(){var t=i(this);t.next().is("i")&&!this.validity.valid&&(m=!1,t.next("i").css("display","")),b[t.attr("id").substring(3)]=t.val()}),m&&(l.find("i").css("display","none"),n.ajax(b,function(t,e,a){if("ok"==t.status){var i=n.processCal(u,t),s="";if(t.hasOwnProperty("dn"))for(s in t.dn)t.dn.hasOwnProperty(s)&&(r[s]=t.dn[s]);n.updateAllCals(u,i),l.semodal("toggle")}else l.find("i").css("display","none"),k.val(""),k.next("i").css("display",""),l.find("img").attr("src",t.path),k.data("prefix",t.prefix)},l.children("div:first")))},n.delEvent=function(t){if(!confirm(S.ConfirmEventDel))return t.preventDefault(),!1;n.visitEvent(t)},n.visitEvent=function(t){var e=i(t.target),a=e.closest(".se-div"),s=a.data("uid"),o=n.getDate(a.data("date"));o.setDate(o.getDate()+e.closest("td").index());var r=e.closest(".se-ev-item, .se-ev-item-my").data("id"),d={action:"se-ev-item-delete"==e.attr("name")?"del_event":"visit_event",sec:c,dt:n.getDateStr(o),uid:s,eid:r};n.ajax(d,function(t,e,a){if("ok"==t.status){var i=n.processCal(s,t);n.updateAllCals(s,i)}},a)},n.processCal=function(t,e){var a=[],i="";if(e.hasOwnProperty("cal"))for(i in e.cal)e.cal.hasOwnProperty(i)&&(s[t][i]=e.cal[i],a.push(i));return a},n.showUsers=function(){var t=i(this),e=t.closest(".se-ev-item, .se-ev-item-my").find(".se-ev-item-vis"),a=e.find(".se-ev-item-vis-grad");a.is(":visible")?(a.hide(),e.animate({height:e.get(0).scrollHeight},300,function(){i(this).height("auto")})):(e.animate({height:100},300,function(){i(this).height("100px")}),a.show());var n=t.text();t.text(t.data("alttext")),t.data("alttext",n)},n.modalShow=function(t){l.find("i").css("display","none"),""==l.data("eid")?(l.find('input[type="email"],input[type="text"],textarea').val(""),l.find('input[type="checkbox"],input[type="radio"]').prop("checked",!1)):k.val(""),l.find(".se-blur").remove()},n.modalShown=function(t){n.ajax({action:"get_sesdata",tp:8},function(t,e,a){"ok"==t.status&&(l.find("img").attr("src",t.path),k.data("prefix",t.prefix))},l.children("div:first"))},n.saveTimezone=function(){var t=i(this).closest(".se-timezone"),e=t.data("uid"),a=t.find("#se-timezone").val();n.ajax({action:"save_timezone",uid:e,tz:a,sec:c},null,t)},n.ajax=function(t,e,a){var s=d.clone();i.ajax({type:"get",dataType:"json",url:h,data:t,beforeSend:function(){a.prepend(s)},success:e,error:n.ajaxError,complete:function(t){s.remove()}})},n.ajaxError=function(t,e,a){alert(a)},n.getDateStr=function(t){return t.getFullYear()+"-"+n.pad(t.getMonth()+1,2)+"-"+n.pad(t.getDate(),2)},n.pad=function(t,e){return("000"+String(t)).slice(-e)},n.getDate=function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2])}}(window,document,navigator,jQuery,window.SESHED);